
#version 330 core


in vec2 texCoord;

out vec4 FragColor;

uniform sampler2D palettes;
uniform int palette;

uniform usampler2D tex;


void main()
{
    uvec4 tmp = texture(tex, texCoord);

    uint index = tmp.r;
    uint alpha = tmp.g;

    vec4 color = texelFetch(palettes, ivec2(index, palette), 0);
    if (alpha == 0U)
    {
        discard;
    }
    FragColor = vec4(color.rgb, 1);
}

